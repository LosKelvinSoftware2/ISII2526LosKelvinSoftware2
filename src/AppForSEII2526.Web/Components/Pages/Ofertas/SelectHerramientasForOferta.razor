@page "/ofertas/selectherramientasforoferta"

@using AppForSEII2526.Web.API
@inject AppForSEII2526APIClient apiclient
@inject ILogger<SelectHerramientasForOferta> logger
@inject OfertaStateContainer ofertaState
@inject NavigationManager navigation

<h3>Select Herramientas For Oferta</h3>

<div class="container-fluid">
    <div class="row" hidden="@hideErrors">
        <p>here i will show the errors</p>
    </div>
    <div class="row">
        <div class="col-8">
            <div class="row">
                <p>here i will show the filters</p>
                <div class="col">
                    <button type="button" class="btn btn-primary" @onclick=@BuscarHerramienta id="BuscarHerramientas">Buscar Herramientas</button>
                </div>
            </div>
            <div class="row">
                <p>here i will show the list of herramientas</p>
                @if (herramientas == null) {
                    <p>Buscando herramientas....</p>
                }
                else
                {
                    <p>number of herramientas @herramientas.Count</p>
                }
            </div>
        </div>
            <div class="col-2">
        </div>
    </div>
</div>
@@ -22,5 +37,22 @@

@code {
    private ICollection<HerramientaForOfertaDTO> herramientas;
    private bool hideErrors { get { return errors.Length == 0; } }
    private string errors = "";
    private float precio { get; set; }
    private string fabricante { get; set; }

    public async void BuscarHerramienta() {
        try {
            herramientas = await apiclient.GetHerramientaForOfertaAsync(fabricante, precio);
        }
        catch (ApiException ex) {
            logger.LogError($"{DateTime.Now} Error: {ex}");
            errors = "Error while connecting to the system";
        }
        StateHasChanged();
    }
}